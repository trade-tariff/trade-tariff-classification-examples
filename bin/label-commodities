#! /usr/bin/env ruby

require 'rubygems'
require 'bundler/setup'
require 'json'
require_relative '../config/environment'
require_relative '../app/services/fetch_records'

result = FetchRecords.new.call

date = Time.zone.now.strftime("%Y-%m-%d")
model = GeminiShellClient::MODEL

File.write(
  Rails.root.join("data/labelled_commodities_#{model}_#{date}.json"),
  JSON.pretty_generate(result),
)
